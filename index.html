<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparateur d'Ã‰picerie</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 transition-colors duration-300">

<div class="container mx-auto px-4 py-10 max-w-[1600px]">
    <!-- Header -->
    <header class="flex justify-between items-center mb-10 pb-6 border-b border-gray-200 dark:border-slate-700">
        <div>
            <h1 class="text-3xl font-bold tracking-tight">ğŸ“¦ Inventaire Ã‰picerie</h1>
            <p class="text-gray-600 dark:text-slate-400 mt-1">Comparateur optimisÃ© â€¢ Ricotta, Persil, Bavette, Huile</p>
        </div>
        <button id="themeToggle" class="bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 px-4 py-2 rounded-xl shadow-md hover:-translate-y-1 transition-all text-2xl">
            ğŸŒ™
        </button>
    </header>
    
    <!-- Search Bar -->
    <div class="relative max-w-2xl mx-auto mb-8">
        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 dark:text-slate-400 text-xl">ğŸ”</span>
        <input type="text" id="searchInput" placeholder="Chercher produit, marque, Ã©picerie..." 
            class="w-full pl-12 pr-4 py-4 bg-white dark:bg-slate-800 border-2 border-gray-300 dark:border-slate-600 rounded-xl shadow-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-500/20 outline-none transition-all text-base">
    </div>

    <!-- Filters -->
    <div class="flex gap-3 mb-6 flex-wrap justify-center">
        <button onclick="filterByCategory('all')" class="filter-btn px-4 py-2 rounded-full bg-blue-500 text-white font-semibold text-sm hover:bg-blue-600 transition-all">
            Tous
        </button>
        <button onclick="filterByCategory('ricotta')" class="filter-btn px-4 py-2 rounded-full bg-gray-200 dark:bg-slate-700 text-gray-700 dark:text-slate-300 font-semibold text-sm hover:bg-gray-300 dark:hover:bg-slate-600 transition-all">
            ğŸ§€ Ricotta
        </button>
        <button onclick="filterByCategory('persil')" class="filter-btn px-4 py-2 rounded-full bg-gray-200 dark:bg-slate-700 text-gray-700 dark:text-slate-300 font-semibold text-sm hover:bg-gray-300 dark:hover:bg-slate-600 transition-all">
            ğŸŒ¿ Persil
        </button>
        <button onclick="filterByCategory('bavette')" class="filter-btn px-4 py-2 rounded-full bg-gray-200 dark:bg-slate-700 text-gray-700 dark:text-slate-300 font-semibold text-sm hover:bg-gray-300 dark:hover:bg-slate-600 transition-all">
            ğŸ¥© Bavette
        </button>
        <button onclick="filterByCategory('huile')" class="filter-btn px-4 py-2 rounded-full bg-gray-200 dark:bg-slate-700 text-gray-700 dark:text-slate-300 font-semibold text-sm hover:bg-gray-300 dark:hover:bg-slate-600 transition-all">
            ğŸ›¢ï¸ Huile
        </button>
    </div>

    <!-- Table -->
    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-xl overflow-hidden border border-gray-200 dark:border-slate-700">
        <div class="overflow-x-auto">
            <table class="w-full border-collapse min-w-[1200px]">
                <thead class="bg-gray-100 dark:bg-slate-700/50 border-b-2 border-gray-300 dark:border-slate-600">
                    <tr>
                        <th class="px-4 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">Produit</th>
                        <th class="px-4 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">SpÃ©cifique</th>
                        <th class="px-4 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">Marque</th>
                        <th class="px-4 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">Ã‰picerie</th>
                        <th class="px-4 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">Format (ml/g)</th>
                        <th class="px-4 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">Prix RÃ©g.</th>
                        <th class="px-4 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">Prix Rabais</th>
                        <th class="px-4 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">Date Exp.</th>
                        <th class="px-4 py-4 text-left text-xs font-semibold text-gray-600 dark:text-slate-400 uppercase tracking-wider">Lien</th>
                    </tr>
                </thead>
                <tbody id="tableBody" class="divide-y divide-gray-200 dark:divide-slate-700"></tbody>
            </table>
        </div>
    </div>
</div>

<!-- Toast Notification -->
<div id="toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-slate-600 px-6 py-3 rounded-full shadow-2xl opacity-0 invisible transition-all duration-300 flex items-center gap-3 z-50">
    <div class="w-5 h-5 bg-green-500 rounded-full flex items-center justify-center text-white text-xs font-bold">âœ“</div>
    <span class="font-semibold">CopiÃ© !</span>
</div>

<script>
    // Data
    const rawData = [
        // RICOTTA
        { categorie: "ricotta", nom: "Ricotta 475 ml", specifique: "Ricotta", marque: "Tre Stelle", epicerie: "Maxi", format: 475, unite: "ml", prix: 9.00, url: "https://www.maxi.ca/fr/search?search-bar=fromage+ricotta" },
        { categorie: "ricotta", nom: "Fromage Ricotta 454 ml", specifique: "Ricotta", marque: "Choix du PrÃ©sident", epicerie: "Maxi", format: 454, unite: "ml", prix: 7.50, url: "https://www.maxi.ca/fr/search?search-bar=fromage+ricotta" },
        { categorie: "ricotta", nom: "Fromage frais ricotta 5% m.g. 280 ml", specifique: "Ricotta 5%", marque: "Tre Stelle", epicerie: "Maxi", format: 280, unite: "ml", prix: 5.00, url: "https://www.maxi.ca/fr/search?search-bar=fromage+ricotta" },
        { categorie: "ricotta", nom: "Fromage frais sans lactose ricotta 10% m.g. 400 ml", specifique: "Ricotta sans lactose", marque: "Tre Stelle", epicerie: "Maxi", format: 400, unite: "ml", prix: 9.00, url: "https://www.maxi.ca/fr/search?search-bar=fromage+ricotta" },
        { categorie: "ricotta", nom: "Fromage ricotta lÃ©ger 475 ml", specifique: "Ricotta lÃ©ger", marque: "Tre Stelle", epicerie: "Maxi", format: 475, unite: "ml", prix: 9.00, url: "https://www.maxi.ca/fr/search?search-bar=fromage+ricotta" },
        { categorie: "ricotta", nom: "Ricotta Fiorella 475 ml", specifique: "Ricotta Fiorella", marque: "Saputo", epicerie: "Maxi", format: 475, unite: "ml", prix: 9.00, url: "https://www.maxi.ca/fr/search?search-bar=fromage+ricotta" },
        
        { categorie: "ricotta", nom: "Fromage ricotta lÃ©ger 280 ml", specifique: "Ricotta lÃ©ger", marque: "Tre Stelle", epicerie: "IGA", format: 280, unite: "ml", prix: 5.99, url: "https://www.iga.net/fr/search?k=fromage%20ricotta" },
        { categorie: "ricotta", nom: "Ricotta sans lactose 400 ml", specifique: "Ricotta sans lactose", marque: "Tre Stelle", epicerie: "IGA", format: 400, unite: "ml", prix: 8.99, url: "https://www.iga.net/fr/search?k=fromage%20ricotta" },
        { categorie: "ricotta", nom: "Fromage ricotta Fiorella 300 ml", specifique: "Ricotta Fiorella", marque: "Saputo Artisan", epicerie: "IGA", format: 300, unite: "ml", prix: 6.49, url: "https://www.iga.net/fr/search?k=fromage%20ricotta" },
        { categorie: "ricotta", nom: "Fromage ricotta traditionnel 475 ml", specifique: "Ricotta traditionnel", marque: "Tre Stelle", epicerie: "IGA", format: 475, unite: "ml", prix: 8.99, url: "https://www.iga.net/fr/search?k=fromage%20ricotta" },
        { categorie: "ricotta", nom: "Fromage ricotta lÃ©ger 475 ml", specifique: "Ricotta lÃ©ger", marque: "Tre Stelle", epicerie: "IGA", format: 475, unite: "ml", prix: 8.99, url: "https://www.iga.net/fr/search?k=fromage%20ricotta" },
        { categorie: "ricotta", nom: "Fromage ricotta traditionnel 280 ml", specifique: "Ricotta traditionnel", marque: "Tre Stelle", epicerie: "IGA", format: 280, unite: "ml", prix: 5.99, url: "https://www.iga.net/fr/search?k=fromage%20ricotta" },
        { categorie: "ricotta", nom: "Fromage ricotta Di Campagna 400 ml", specifique: "Ricotta Di Campagna", marque: "Saputo Gourmet", epicerie: "IGA", format: 400, unite: "ml", prix: 6.99, url: "https://www.iga.net/fr/search?k=fromage%20ricotta" },
        { categorie: "ricotta", nom: "Fromage ricotta Fiorella lÃ©ger 300 ml", specifique: "Ricotta Fiorella lÃ©ger", marque: "Saputo Artisan Lite", epicerie: "IGA", format: 300, unite: "ml", prix: 6.49, url: "https://www.iga.net/fr/search?k=fromage%20ricotta" },
        { categorie: "ricotta", nom: "Fromage ricotta trÃ¨s onctueux 475 ml", specifique: "Ricotta trÃ¨s onctueux", marque: "Tre Stelle", epicerie: "IGA", format: 475, unite: "ml", prix: 8.99, url: "https://www.iga.net/fr/search?k=fromage%20ricotta" },
        { categorie: "ricotta", nom: "Fromage ricotta Di Campagna lÃ©ger 400 ml", specifique: "Ricotta Di Campagna lÃ©ger", marque: "Saputo Gourmet", epicerie: "IGA", format: 400, unite: "ml", prix: 6.99, url: "https://www.iga.net/fr/search?k=fromage%20ricotta" },
        
        { categorie: "ricotta", nom: "Fromage ricotta 475 ml", specifique: "Ricotta", marque: "Your Fresh Market", epicerie: "Walmart", format: 475, unite: "ml", prix: 7.48, url: "https://www.walmart.ca/fr/search?q=persil+frais" },
        { categorie: "ricotta", nom: "Fromage ricotta sans lactose blanc 400 ml", specifique: "Ricotta sans lactose", marque: "Tre Stelle", epicerie: "Walmart", format: 400, unite: "ml", prix: 7.77, url: "https://www.walmart.ca/fr/search?q=persil+frais" },
        { categorie: "ricotta", nom: "Fromage ricotta traditionnel blanc 475 ml", specifique: "Ricotta traditionnel", marque: "Tre Stelle", epicerie: "Walmart", format: 475, unite: "ml", prix: 9.23, url: "https://www.walmart.ca/fr/search?q=persil+frais" },
        { categorie: "ricotta", nom: "Fromage ricotta plus lisse frais doux blanc 475 ml", specifique: "Ricotta plus lisse", marque: "Tre Stelle", epicerie: "Walmart", format: 475, unite: "ml", prix: 9.23, url: "https://www.walmart.ca/fr/search?q=persil+frais" },
        
        { categorie: "ricotta", nom: "Fromage ricotta lÃ©ger 300 ml", specifique: "Ricotta lÃ©ger", marque: "Saputo", epicerie: "Avril", format: 300, unite: "ml", prix: 6.59, url: "https://avril.ca/fr/catalogsearch/result/?q=persil%20frais" },
        { categorie: "ricotta", nom: "Fromage ricotta de brebis 2000 ml", specifique: "Ricotta de brebis", marque: "Fromagerie La MoutonniÃ¨re", epicerie: "Avril", format: 2000, unite: "ml", prix: 73.14, rabais: 36.57, url: "https://avril.ca/fr/catalogsearch/result/?q=persil%20frais" },
        
        { categorie: "ricotta", nom: "Fromage ricotta traditionnel 280 ml", specifique: "Ricotta traditionnel", marque: "Tre Stelle", epicerie: "Super C", format: 280, unite: "ml", prix: 5.49, rabais: 4.49, url: "https://www.superc.ca/recherche?filter=fromage+ricotta" },
        { categorie: "ricotta", nom: "Ricotta 400 ml", specifique: "Ricotta", marque: "IrrÃ©sistible", epicerie: "Super C", format: 400, unite: "ml", prix: 5.99, url: "https://www.superc.ca/recherche?filter=fromage+ricotta" },
        { categorie: "ricotta", nom: "Ricotta lÃ©gÃ¨re 400 ml", specifique: "Ricotta lÃ©gÃ¨re", marque: "Mieux-ÃŠtre", epicerie: "Super C", format: 400, unite: "ml", prix: 5.99, url: "https://www.superc.ca/recherche?filter=fromage+ricotta" },
        { categorie: "ricotta", nom: "Fromage ricotta extra fin 475 ml", specifique: "Ricotta extra fin", marque: "Tre Stelle", epicerie: "Super C", format: 475, unite: "ml", prix: 8.49, url: "https://www.superc.ca/recherche?filter=fromage+ricotta" },
        
        { categorie: "ricotta", nom: "Ricotta 475 ml", specifique: "Ricotta", marque: "Tre Stelle", epicerie: "Loblaws", format: 475, unite: "ml", prix: 9.49, url: "https://www.loblaws.ca/fr/search?search-bar=persil" },
        { categorie: "ricotta", nom: "Fromage Ricotta 454 ml", specifique: "Ricotta", marque: "Choix du PrÃ©sident", epicerie: "Loblaws", format: 454, unite: "ml", prix: 8.49, url: "https://www.loblaws.ca/fr/search?search-bar=persil" },
        { categorie: "ricotta", nom: "Fromage ricotta extra fin 475 ml", specifique: "Ricotta extra fin", marque: "Tre Stelle", epicerie: "Loblaws", format: 475, unite: "ml", prix: 9.49, url: "https://www.loblaws.ca/fr/search?search-bar=persil" },
        { categorie: "ricotta", nom: "Ricotta 454 ml", specifique: "Ricotta", marque: "PC Menu Bleu", epicerie: "Loblaws", format: 454, unite: "ml", prix: 8.49, url: "https://www.loblaws.ca/fr/search?search-bar=persil" },
        { categorie: "ricotta", nom: "Ricotta Bari 500 ml", specifique: "Ricotta Bari", marque: "Saputo", epicerie: "Loblaws", format: 500, unite: "ml", prix: 8.49, url: "https://www.loblaws.ca/fr/search?search-bar=persil" },
        { categorie: "ricotta", nom: "Fromage frais traditionnelle ricotta 10% m.g. 280 ml", specifique: "Ricotta 10%", marque: "Tre Stelle", epicerie: "Loblaws", format: 280, unite: "ml", prix: 5.99, rabais: 4.79, finRabais: "2026-01-28", url: "https://www.loblaws.ca/fr/search?search-bar=persil" },
        { categorie: "ricotta", nom: "Fromage frais sans lactose ricotta 10% m.g. 400 ml", specifique: "Ricotta sans lactose", marque: "Tre Stelle", epicerie: "Loblaws", format: 400, unite: "ml", prix: 9.49, url: "https://www.loblaws.ca/fr/search?search-bar=persil" },
        
        // PERSIL
        { categorie: "persil", nom: "Persil frisÃ© biologique 1 botte", specifique: "Persil frisÃ© bio", marque: "â€”", epicerie: "MarchÃ© Tau", format: "1 botte", unite: "", prix: 1.99, url: "https://marchestau.com/recherche-produits?qs=persil+frai" },
        { categorie: "persil", nom: "Persil italien biologique 1 botte", specifique: "Persil italien bio", marque: "â€”", epicerie: "MarchÃ© Tau", format: "1 botte", unite: "", prix: 1.99, url: "https://marchestau.com/recherche-produits?qs=persil+frai" },
        
        { categorie: "persil", nom: "Persil frisÃ© 1 botte", specifique: "Persil frisÃ©", marque: "â€”", epicerie: "Maxi", format: "1 botte", unite: "", prix: 1.99, url: "https://www.maxi.ca/fr/search?search-bar=Persil+Frais" },
        { categorie: "persil", nom: "Persil italien 1 botte", specifique: "Persil italien", marque: "â€”", epicerie: "Maxi", format: "1 botte", unite: "", prix: 1.99, url: "https://www.maxi.ca/fr/search?search-bar=Persil+Frais" },
        { categorie: "persil", nom: "Persil frisÃ© en pot 1 plant", specifique: "Persil frisÃ© en pot", marque: "â€”", epicerie: "Maxi", format: "1 plant", unite: "", prix: 4.99, url: "https://www.maxi.ca/fr/search?search-bar=Persil+Frais" },
        { categorie: "persil", nom: "Persil italien en pot 1 plant", specifique: "Persil italien en pot", marque: "â€”", epicerie: "Maxi", format: "1 plant", unite: "", prix: 4.99, url: "https://www.maxi.ca/fr/search?search-bar=Persil+Frais" },
        
        { categorie: "persil", nom: "Persil frisÃ© 1 botte", specifique: "Persil frisÃ©", marque: "â€”", epicerie: "IGA", format: "1 botte", unite: "", prix: 2.49, url: "https://www.iga.net/fr/search?k=persil%20frais" },
        { categorie: "persil", nom: "Persil italien 1 botte", specifique: "Persil italien", marque: "â€”", epicerie: "IGA", format: "1 botte", unite: "", prix: 2.49, url: "https://www.iga.net/fr/search?k=persil%20frais" },
        { categorie: "persil", nom: "Persil frisÃ© biologique 1 botte", specifique: "Persil frisÃ© bio", marque: "â€”", epicerie: "IGA", format: "1 botte", unite: "", prix: 2.99, url: "https://www.iga.net/fr/search?k=persil%20frais" },
        { categorie: "persil", nom: "Persil italien biologique 1 botte", specifique: "Persil italien bio", marque: "â€”", epicerie: "IGA", format: "1 botte", unite: "", prix: 2.99, url: "https://www.iga.net/fr/search?k=persil%20frais" },
        { categorie: "persil", nom: "Persil frisÃ© frais 1 botte", specifique: "Persil frisÃ© frais", marque: "Serres Coulombe", epicerie: "IGA", format: "1 botte", unite: "", prix: 5.99, url: "https://www.iga.net/fr/search?k=persil%20frais" },
        { categorie: "persil", nom: "Persil italien frais 1 botte", specifique: "Persil italien frais", marque: "Serres Coulombe", epicerie: "IGA", format: "1 botte", unite: "", prix: 5.99, url: "https://www.iga.net/fr/search?k=persil%20frais" },
        
        { categorie: "persil", nom: "Persil frisÃ© frais 1 botte", specifique: "Persil frisÃ©", marque: "â€”", epicerie: "Walmart", format: "1 botte", unite: "", prix: 1.97, url: "https://www.walmart.ca/fr/search?q=persil%20frais" },
        { categorie: "persil", nom: "Persil plat frais 1 botte", specifique: "Persil plat", marque: "â€”", epicerie: "Walmart", format: "1 botte", unite: "", prix: 1.97, url: "https://www.walmart.ca/fr/search?q=persil%20frais" },
        
        { categorie: "persil", nom: "Persil frisÃ© biologique 1 botte", specifique: "Persil frisÃ© bio", marque: "â€”", epicerie: "Avril", format: "1 botte", unite: "", prix: 1.99, url: "https://avril.ca/fr/catalogsearch/result/?q=persil" },
        { categorie: "persil", nom: "Persil italien biologique 1 botte", specifique: "Persil italien bio", marque: "â€”", epicerie: "Avril", format: "1 botte", unite: "", prix: 1.99, url: "https://avril.ca/fr/catalogsearch/result/?q=persil" },
        
        { categorie: "persil", nom: "Persil frisÃ© 1 botte", specifique: "Persil frisÃ©", marque: "â€”", epicerie: "Super C", format: "1 botte", unite: "", prix: 1.99, url: "https://www.superc.ca/recherche?filter=persil" },
        { categorie: "persil", nom: "Persil italien frais 1 botte", specifique: "Persil italien", marque: "â€”", epicerie: "Super C", format: "1 botte", unite: "", prix: 1.99, url: "https://www.superc.ca/recherche?filter=persil" },
        
        { categorie: "persil", nom: "Persil frisÃ© 1 botte", specifique: "Persil frisÃ©", marque: "â€”", epicerie: "Loblaws", format: "1 botte", unite: "", prix: 2.50, url: "https://www.loblaws.ca/fr/search?search-bar=Persil+Frais" },
        { categorie: "persil", nom: "Persil italien 1 botte", specifique: "Persil italien", marque: "â€”", epicerie: "Loblaws", format: "1 botte", unite: "", prix: 2.50, url: "https://www.loblaws.ca/fr/search?search-bar=Persil+Frais" },
        
        // BAVETTE
        { categorie: "bavette", nom: "Bavette de bÅ“uf bio 170 g", specifique: "Bavette bio", marque: "Beretta", epicerie: "MarchÃ© Tau", format: 170, unite: "g", prix: 14.99, url: "https://marchestau.com/recherche-produits?qs=Bavette+de+b%C5%93uf" },
        
        { categorie: "bavette", nom: "Bavette de bÅ“uf assaisonnÃ©e ail et fines herbes 225 g", specifique: "Bavette assaisonnÃ©e", marque: "Houston Avenue Bar & Grill", epicerie: "Maxi", format: 225, unite: "g", prix: 12.00, url: "https://www.maxi.ca/fr/search?search-bar=Bavette+De+Boeuf" },
        { categorie: "bavette", nom: "Bavette de bÅ“uf assaisonnÃ©e saveur steakhouse 225 g", specifique: "Bavette steakhouse", marque: "Houston Avenue Bar & Grill", epicerie: "Maxi", format: 225, unite: "g", prix: 12.00, url: "https://www.maxi.ca/fr/search?search-bar=Bavette+De+Boeuf" },
        
        { categorie: "bavette", nom: "Bavette de bÅ“uf marinÃ©e ~350 g", specifique: "Bavette marinÃ©e", marque: "Top Gourmet", epicerie: "IGA", format: 350, unite: "g", prix: 20.65, url: "https://www.iga.net/fr/search?k=bavette%20de%20boeuf" },
        { categorie: "bavette", nom: "Bavette de bÅ“uf AAA 255 g", specifique: "Bavette AAA", marque: "Famille Fontaine", epicerie: "IGA", format: 255, unite: "g", prix: 18.49, rabais: 17.99, url: "https://www.iga.net/fr/search?k=bavette%20de%20boeuf" },
        { categorie: "bavette", nom: "Bavette de bÅ“uf ~350 g", specifique: "Bavette", marque: "8 Acres", epicerie: "IGA", format: 350, unite: "g", prix: 24.50, url: "https://www.iga.net/fr/search?k=bavette%20de%20boeuf" },
        { categorie: "bavette", nom: "Bavette de bÅ“uf 300 g (2Ã—150 g)", specifique: "Bavette", marque: "BÃ¢ton Rouge", epicerie: "IGA", format: 300, unite: "g", prix: 18.99, url: "https://www.iga.net/fr/search?k=bavette%20de%20boeuf" },
        { categorie: "bavette", nom: "Bavette de bÅ“uf ~350 g", specifique: "Bavette", marque: "Sterling Silver", epicerie: "IGA", format: 350, unite: "g", prix: 22.75, url: "https://www.iga.net/fr/search?k=bavette%20de%20boeuf" },
        { categorie: "bavette", nom: "Bavette de bÅ“uf Dijon ~350 g", specifique: "Bavette Dijon", marque: "Sterling Silver", epicerie: "IGA", format: 350, unite: "g", prix: 25.72, url: "https://www.iga.net/fr/search?k=bavette%20de%20boeuf" },
{ categorie: "bavette", nom: "Bavette de bÅ“uf 3 poivres ~350 g", specifique: "Bavette 3 poivres", marque: "Sterling Silver", epicerie: "IGA", format: 350, unite: "g", prix: 25.72, url: "https://www.iga.net/fr/search?k=bavette%20de%20boeuf" },
{ categorie: "bavette", nom: "Bavette de bÅ“uf truffe ~250 g", specifique: "Bavette truffe", marque: "Sterling Silver", epicerie: "IGA", format: 250, unite: "g", prix: 18.37, url: "https://www.iga.net/fr/search?k=bavette%20de%20boeuf" },
{ categorie: "bavette", nom: "Bavette de bÅ“uf Ã  la parisienne ~350 g", specifique: "Bavette parisienne", marque: "Les PrÃªts-Ã -cuire du Boucher", epicerie: "IGA", format: 350, unite: "g", prix: 25.72, url: "https://www.iga.net/fr/search?k=bavette%20de%20boeuf" },
{ categorie: "bavette", nom: "Bavette de bÅ“uf biologique ~350 g", specifique: "Bavette bio", marque: "8 Acres", epicerie: "IGA", format: 350, unite: "g", prix: 16.10, url: "https://www.iga.net/fr/search?k=bavette%20de%20boeuf" },
{ categorie: "bavette", nom: "Bavette de bÅ“uf nourri Ã  l'herbe 227 g", specifique: "Bavette herbe", marque: "8 Acres", epicerie: "IGA", format: 227, unite: "g", prix: 18.99, url: "https://www.iga.net/fr/search?k=bavette%20de%20boeuf" },{ categorie: "bavette", nom: "Bavette de bÅ“uf aux Ã©pices steakhouse 225 g", specifique: "Bavette steakhouse", marque: "IrrÃ©sistible", epicerie: "Super C", format: 225, unite: "g", prix: 11.99, url: "https://www.superc.ca/recherche?filter=bavette%20de%20boeuf" },
    { categorie: "bavette", nom: "Bavette de bÅ“uf au vin blanc et Ã©chalotes 225 g", specifique: "Bavette vin blanc", marque: "IrrÃ©sistible", epicerie: "Super C", format: 225, unite: "g", prix: 11.99, url: "https://www.superc.ca/recherche?filter=bavette%20de%20boeuf" },
    
    // HUILE
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale pure Ã  100% 946 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Sans Nom", epicerie: "Maxi", format: 946, unite: "ml", prix: 4.00, url: "https://www.maxi.ca/fr/search?search-bar=Huile+v%C3%A9g%C3%A9tale" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale pure Ã  100% 3000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Sans Nom", epicerie: "Maxi", format: 3000, unite: "ml", prix: 9.00, url: "https://www.maxi.ca/fr/search?search-bar=Huile+v%C3%A9g%C3%A9tale" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 3000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Unico", epicerie: "Maxi", format: 3000, unite: "ml", prix: 6.88, url: "https://www.maxi.ca/fr/search?search-bar=Huile+v%C3%A9g%C3%A9tale" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 1180 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Mazola", epicerie: "Maxi", format: 1180, unite: "ml", prix: 8.79, rabais: 8.00, finRabais: "2026-01-28", url: "https://www.maxi.ca/fr/search?search-bar=Huile+v%C3%A9g%C3%A9tale" },
    
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 946 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Compliments", epicerie: "IGA", format: 946, unite: "ml", prix: 7.49, rabais: 6.49, url: "https://www.iga.net/fr/search?t={14A91276-40BA-49D5-940D-3692DE3DC381}&k=Huile%20v%C3%A9g%C3%A9tale" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 3000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Compliments", epicerie: "IGA", format: 3000, unite: "ml", prix: 11.29, url: "https://www.iga.net/fr/search?t={14A91276-40BA-49D5-940D-3692DE3DC381}&k=Huile%20v%C3%A9g%C3%A9tale" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 3000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Unico", epicerie: "IGA", format: 3000, unite: "ml", prix: 15.79, url: "https://www.iga.net/fr/search?t={14A91276-40BA-49D5-940D-3692DE3DC381}&k=Huile%20v%C3%A9g%C3%A9tale" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 1180 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Mazola", epicerie: "IGA", format: 1180, unite: "ml", prix: 9.49, url: "https://www.iga.net/fr/search?t={14A91276-40BA-49D5-940D-3692DE3DC381}&k=Huile%20v%C3%A9g%C3%A9tale" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 2840 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Mazola", epicerie: "IGA", format: 2840, unite: "ml", prix: 17.29, rabais: 15.49, url: "https://www.iga.net/fr/search?t={14A91276-40BA-49D5-940D-3692DE3DC381}&k=Huile%20v%C3%A9g%C3%A9tale" },
    
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 1000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Great Value", epicerie: "Walmart", format: 1000, unite: "ml", prix: 3.98, url: "https://www.walmart.ca/fr/search?q=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 5000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Great Value", epicerie: "Walmart", format: 5000, unite: "ml", prix: 12.97, url: "https://www.walmart.ca/fr/search?q=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 1180 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Mazola", epicerie: "Walmart", format: 1180, unite: "ml", prix: 8.77, url: "https://www.walmart.ca/fr/search?q=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 2840 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Mazola", epicerie: "Walmart", format: 2840, unite: "ml", prix: 12.96, rabais: 7.97, url: "https://www.walmart.ca/fr/search?q=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 16000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Capri", epicerie: "Walmart", format: 16000, unite: "ml", prix: 40.59, url: "https://www.walmart.ca/fr/search?q=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 16000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Saporito", epicerie: "Walmart", format: 16000, unite: "ml", prix: 41.98, url: "https://www.walmart.ca/fr/search?q=beurre" },
    
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 946 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Selection", epicerie: "Super C", format: 946, unite: "ml", prix: 4.99, url: "https://www.superc.ca/recherche?freeText=true&filter=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 3000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Selection", epicerie: "Super C", format: 3000, unite: "ml", prix: 7.99, url: "https://www.superc.ca/recherche?freeText=true&filter=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 3000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Unico", epicerie: "Super C", format: 3000, unite: "ml", prix: 10.99, url: "https://www.superc.ca/recherche?freeText=true&filter=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale pure 1180 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Mazola", epicerie: "Super C", format: 1180, unite: "ml", prix: 8.49, url: "https://www.superc.ca/recherche?freeText=true&filter=beurre" },
    
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale pure Ã  100% 946 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Sans Nom", epicerie: "Loblaws", format: 946, unite: "ml", prix: 6.50, url: "https://www.loblaws.ca/fr/search?search-bar=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale pure Ã  100% 3000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Sans Nom", epicerie: "Loblaws", format: 3000, unite: "ml", prix: 11.00, url: "https://www.loblaws.ca/fr/search?search-bar=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 3000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Unico", epicerie: "Loblaws", format: 3000, unite: "ml", prix: 14.00, url: "https://www.loblaws.ca/fr/search?search-bar=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 3000 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Saporito", epicerie: "Loblaws", format: 3000, unite: "ml", prix: 13.00, url: "https://www.loblaws.ca/fr/search?search-bar=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 1180 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Mazola", epicerie: "Loblaws", format: 1180, unite: "ml", prix: 10.00, url: "https://www.loblaws.ca/fr/search?search-bar=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale 2840 ml", specifique: "Huile vÃ©gÃ©tale", marque: "Mazola", epicerie: "Loblaws", format: 2840, unite: "ml", prix: 17.00, url: "https://www.loblaws.ca/fr/search?search-bar=beurre" },
    { categorie: "huile", nom: "Huile vÃ©gÃ©tale (soja) 1180 ml", specifique: "Huile vÃ©gÃ©tale soja", marque: "Crisco", epicerie: "Loblaws", format: 1180, unite: "ml", prix: 10.00, url: "https://www.loblaws.ca/fr/search?search-bar=beurre" },
];

// Theme Toggle
const themeBtn = document.getElementById('themeToggle');
const html = document.documentElement;

if(localStorage.getItem('theme') === 'dark') {
    html.classList.add('dark');
    themeBtn.textContent = 'â˜€ï¸';
}

themeBtn.addEventListener('click', () => {
    html.classList.toggle('dark');
    const isDark = html.classList.contains('dark');
    themeBtn.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
});

// Store Badges
function getStoreBadge(epicerie) {
    const badges = {
        'Maxi': 'bg-yellow-300 text-slate-900 border-yellow-400',
        'IGA': 'bg-red-50 text-red-700 border-red-200',
        'Walmart': 'bg-blue-50 text-blue-700 border-blue-200',
        'Super C': 'bg-orange-50 text-orange-700 border-orange-200',
        'Loblaws': 'bg-slate-900 text-white border-slate-800',
        'MarchÃ© Tau': 'bg-green-50 text-green-700 border-green-200',
        'Avril': 'bg-purple-50 text-purple-700 border-purple-200'
    };
    const color = badges[epicerie] || 'bg-gray-200 text-gray-700 border-gray-300';
    return `<span class="inline-block px-2 py-1 rounded-full text-xs font-bold uppercase border ${color}">${epicerie}</span>`;
}

// Copy Function
async function copyText(text, btn) {
    try {
        await navigator.clipboard.writeText(text);
        showToast();
        btn.classList.add('text-green-500', 'font-bold');
        setTimeout(() => btn.classList.remove('text-green-500', 'font-bold'), 600);
    } catch(e) { console.error(e); }
}

function showToast() {
    const toast = document.getElementById('toast');
    toast.classList.remove('opacity-0', 'invisible');
    toast.classList.add('opacity-100', 'visible');
    setTimeout(() => {
        toast.classList.add('opacity-0', 'invisible');
        toast.classList.remove('opacity-100', 'visible');
    }, 2000);
}

// Render Table
let currentCategory = 'all';
const tableBody = document.getElementById('tableBody');
const searchInput = document.getElementById('searchInput');

function renderTable(searchTerm = '') {
    const lowerSearch = searchTerm.toLowerCase();
    
    const filtered = rawData.filter(item => {
        const matchCategory = currentCategory === 'all' || item.categorie === currentCategory;
        const matchSearch = item.nom.toLowerCase().includes(lowerSearch) ||
                           item.marque.toLowerCase().includes(lowerSearch) ||
                           item.epicerie.toLowerCase().includes(lowerSearch) ||
                           item.specifique.toLowerCase().includes(lowerSearch);
        return matchCategory && matchSearch;
    });

    tableBody.innerHTML = '';
    
    filtered.forEach(item => {
        const formatDisplay = item.unite ? `${item.format} ${item.unite}` : item.format;
        const rabaisDisplay = item.rabais ? `<span class="text-red-600 dark:text-red-400 font-bold">$${item.rabais.toFixed(2)}</span>` : '-';
        const dateDisplay = item.finRabais ? item.finRabais : '-';
        
        const row = document.createElement('tr');
        row.className = 'hover:bg-gray-50 dark:hover:bg-slate-700/50 transition-colors';
        row.innerHTML = `
            <td class="px-4 py-3 text-sm">
                <div class="flex items-center justify-between gap-2 group">
                    <span>${item.nom}</span>
                    <button onclick='copyText("${item.nom.replace(/'/g, "\\'")}",this)' class="opacity-0 group-hover:opacity-100 text-gray-500 hover:text-blue-500 transition-all p-1" title="Copier">ğŸ“‹</button>
                </div>
            </td>
            <td class="px-4 py-3 text-sm">
                <div class="flex items-center justify-between gap-2 group">
                    <span>${item.specifique}</span>
                    <button onclick='copyText("${item.specifique.replace(/'/g, "\\'")}",this)' class="opacity-0 group-hover:opacity-100 text-gray-500 hover:text-blue-500 transition-all p-1" title="Copier">ğŸ“‹</button>
                </div>
            </td>
            <td class="px-4 py-3 text-sm">
                <div class="flex items-center justify-between gap-2 group">
                    <span>${item.marque}</span>
                    <button onclick='copyText("${item.marque.replace(/'/g, "\\'")}",this)' class="opacity-0 group-hover:opacity-100 text-gray-500 hover:text-blue-500 transition-all p-1" title="Copier">ğŸ“‹</button>
                </div>
            </td>
            <td class="px-4 py-3">${getStoreBadge(item.epicerie)}</td>
            <td class="px-4 py-3 text-sm">
                <div class="flex items-center justify-between gap-2 group">
                    <span>${formatDisplay}</span>
                    <button onclick='copyText("${formatDisplay}",this)' class="opacity-0 group-hover:opacity-100 text-gray-500 hover:text-blue-500 transition-all p-1" title="Copier">ğŸ“‹</button>
                </div>
            </td>
            <td class="px-4 py-3 font-semibold text-sm">$${item.prix.toFixed(2)}</td>
            <td class="px-4 py-3 text-sm">${rabaisDisplay}</td>
            <td class="px-4 py-3 text-sm">${dateDisplay}</td>
            <td class="px-4 py-3">
                <div class="flex items-center gap-2">
                    <a href="${item.url}" target="_blank" class="text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 text-xs underline truncate max-w-[120px]" title="${item.url}">Voir</a>
                    <button onclick='copyText("${item.url}",this)' class="text-gray-500 hover:text-blue-500 transition-all p-1" title="Copier lien">ğŸ“‹</button>
                </div>
            </td>
        `;
        tableBody.appendChild(row);
    });
}

// Filter by Category
window.filterByCategory = function(cat) {
    currentCategory = cat;
    
    // Update button styles
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('bg-blue-500', 'text-white');
        btn.classList.add('bg-gray-200', 'dark:bg-slate-700', 'text-gray-700', 'dark:text-slate-300');
    });
    
    event.target.classList.remove('bg-gray-200', 'dark:bg-slate-700', 'text-gray-700', 'dark:text-slate-300');
    event.target.classList.add('bg-blue-500', 'text-white');
    
    renderTable(searchInput.value);
};

// Search
searchInput.addEventListener('input', (e) => renderTable(e.target.value));

// Make copyText global
window.copyText = copyText;

// Initial render
renderTable();
</script>
</body>
</html>